(function(){!1 in window||CKEDITOR.plugins.add("code",{requires:"dialog,widget",lang:["en"],icons:"code",init:function(a){var m=this,g={},k;k=RegExp("^("+a.config.codeModes.join("|")+")$","i");for(var h=0;h<a.config.codeModes.length;++h)g[a.config.codeModes[h].toLowerCase()]=a.config.codeModes[h];for(var e in a.config.codeAlias)a.config.codeAlias.hasOwnProperty(e)&&(g[e.toLowerCase()]=e,a.config.codeAlias[e.toLowerCase()]=a.config.codeAlias[e],delete a.config.codeAlias[e]);a.code={getMode:function(b){if(!b)return!1;
b=b.toLowerCase();if(a.config.codeAlias.hasOwnProperty(b))return{name:g[b],mode:a.config.codeMimeTypes[a.config.codeAlias[b]].toLowerCase(),alias:b,type:a.config.codeAlias[b]};if(k.test(b))return{name:g[b],mode:b,alias:void 0,type:void 0};if(a.config.codeMimeTypes.hasOwnProperty(b)){var c,d;for(d in a.config.codeAlias)if(a.config.codeAlias.hasOwnProperty(d)&&a.config.codeAlias[d]===b){c=d;break}return{name:g[c||""]||g[a.config.codeMimeTypes[b]],mode:a.config.codeMimeTypes[b],alias:c,type:b}}return!1},
loadedThemes:{}};CKEDITOR.dialog.add("insertCode",this.path+"dialogs/code.js");a.widgets.add("code",{allowedContent:"div[cke-code-block];pre(code)[type mode theme];code[mode theme];",requiredContent:"div(!code-block);code",button:a.lang.code.title,toolbar:"insert,0",draggable:!1,inline:!1,pathName:"code",editables:{content:{selector:"pre.code",allowedContent:!1}},parts:{header:"div.code-header",title:"span.code-title",content:"div.code-content",editable:"pre.code",dialogButton:"div.code-dialog-button"},
defaults:function(){var b=a.getSelection(),c=new CKEDITOR.dom.element("div"),d=a.code.getMode(a.config.codeDefaultMode||"html"),f;if(b){b=b.getRanges();for(f=0;f<b.length;++f)c.append(b[f].cloneContents())}return{title:a.lang.code.blockTitle.replace(":mode",d.name),mode:d.mode,type:d.type||"",alias:d.alias||"",modeName:d.name,content:c.getHtml()}},template:'<div class="code-block" cke-code-block="true"><div class="code-header"><span class="code-title">{title}</span><div class="code-dialog-button"></div></div><div class="code-content"><pre class="code" mode="{mode}" type="{type}">{content}</pre></div></div>',
upcast:function(b){if("code"===b.name||"pre"===b.name&&b.hasClass("code")){var c=new CKEDITOR.htmlParser.element("div"),d=new CKEDITOR.htmlParser.element("div"),f=new CKEDITOR.htmlParser.element("span"),g=new CKEDITOR.htmlParser.element("div"),l=new CKEDITOR.htmlParser.element("div"),j=new CKEDITOR.htmlParser.element("pre"),i,e,h;i=a.code.getMode(b.attributes.mode);e=b.attributes.theme;i||(i=a.code.getMode(a.config.codeDefaultMode));j.attributes.type=i.alias||i.mode;if(e)for(h in a.config.codeThemes)if(a.config.codeThemes.hasOwnProperty(h)&&
e===a.config.codeThemes[h]){j.attributes.theme=e;break}j.attributes["class"]="code";j.setHtml(b.getHtml());l.attributes["class"]="code-dialog-button";f.attributes["class"]="code-title";f.add(new CKEDITOR.htmlParser.text(a.lang.code.blockTitle.replace(":mode",i.name)));d.attributes["class"]="code-header";d.add(f);d.add(l);g.attributes["class"]="code-content";g.add(j);c.attributes["class"]="code-block";c.attributes["cke-code-block"]="true";c.add(d);c.add(g);b.replaceWith(c);return c}return!1},downcast:function(){var b=
new CKEDITOR.htmlParser.element("code"),c;this.parts.editable.hasAttribute("theme")&&this.parts.editable.getAttribute("theme")!==a.config.codeDefaultTheme&&(b.attributes.theme=this.parts.editable.getAttribute("theme"));(c=a.code.getMode(this.parts.editable.getAttribute("type")||this.parts.editable.getAttribute("mode")))||(c=a.code.getMode(a.config.codeDefaultMode));b.attributes.mode=c.alias||c.mode;b.add(new CKEDITOR.htmlParser.cdata(this.codeMirror.getValue()));return b},init:function(){var b,c,
d=this,f=a.code.getMode(this.parts.editable.getAttribute("type")||this.parts.editable.getAttribute("mode")),e=function(b){var c=d.parts.content.getChild(1),e=a.filter,f=new CKEDITOR.filter({allowedContent:{"*":!1}});c.addClass("cke_widget_editable");c.setAttribute("contenteditable","true");b.on("focus",function(){a.setMode("codeMirror");a.setActiveFilter(f);a.setKeystroke([[13,!1],[CKEDITOR.SHIFT+13,!1]])});b.on("blur",function(){a.setMode("wysiwyg");a.setActiveFilter(e);a.getCommand("enter")&&a.getCommand("shiftEnter")&&
a.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])});b.refresh();d.codeMirror=b};c=CKEDITOR.tools.extend({mode:f.type||f.mode,theme:this.parts.editable.getAttribute("theme")||a.config.codeDefaultTheme,value:this.parts.editable.getHtml(),lineNumbers:!0,autoCloseBrackets:!0,autoCloseTags:!0,matchBrackets:!0,matchTags:!0,indentWithTabs:!0,tabSize:4,styleActiveLine:!0,fixedGutter:!1,foldGutter:!1},a.config.codeMirrorConfig);CodeMirror.requireMode?CodeMirror.requireMode(f.mode,function(){b=
CodeMirror(d.parts.content.$,c);e(b)}):(b=CodeMirror(d.parts.content.$,c),e(b));d.parts.editable.setStyle("display","none");this.parts.dialogButton.on("click",function(){a.openDialog("insertCode",function(a){var b,c;c=a.on("show",function(){a.setupContent(d)});b=a.on("ok",function(){d.editor.fire("saveSnapshot");a.commitContent(d)});a.once("hide",function(){c.removeListener();b.removeListener()})})})}});a.on("instanceReady",function(){console.log(a.dataProcessor.htmlFilter);a.dataProcessor.htmlFilter.addRules({elements:{code:function(a){console.log(a)}}});
CKEDITOR.document.appendStyleSheet(m.path+"styles.css")})},onLoad:function(){CKEDITOR.addCss('.code-block .CodeMirror {margin: 0;padding: 0;border: 0;background: transparent;text-decoration: none;width: auto;height: 10.5em;vertical-align: baseline;box-sizing: content-box;-moz-box-sizing: content-box;-webkit-box-sizing: content-box;-webkit-transition: none;-moz-transition: none;-ms-transition: none;transition: none;border-collapse: collapse;font-family: Monaco, "Lucida Console", monospace;color: #000;text-align: left;white-space: normal;cursor: auto;float: none;outline: none;border-radius: 0 0 4px 4px;}.code-block .code-dialog-button {display: block;float: right;height: 16px;width: 16px;background: transparent url('+
this.path+"images/pencil.png) center center no-repeat;}.code-block .code-header {border: 1px solid #a6a6a6;padding: .45em 10px;font-size: 1em;font-weight: bold;border-radius: 4px 4px 0 0;cursor: pointer;text-shadow: 1px 1px 0 0 white;background: #ffffff;background: -moz-linear-gradient(top,  #ffffff 0%, #e4e4e4 100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#e4e4e4));background: -webkit-linear-gradient(top,  #ffffff 0%,#e4e4e4 100%);background: -o-linear-gradient(top,  #ffffff 0%,#e4e4e4 100%);background: -ms-linear-gradient(top,  #ffffff 0%,#e4e4e4 100%);background: linear-gradient(to bottom,  #ffffff 0%,#e4e4e4 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e4e4e4',GradientType=0 );}.code-block .code-content {border: 1px solid #a6a6a6;border-top: none;border-radius: 0 0 4px 4px;}.code-block, .code-block * {outline: none !important}")}})})();
CKEDITOR.config.codeDefaultMode="Html";CKEDITOR.config.codeModes="CSS Go JavaScript PHP Perl Python Ruby Shell SQL".split(" ");CKEDITOR.config.codeMimeTypes={"text/x-csrc":"clike","text/x-c++src":"clike","text/x-java":"clike","text/x-csharp":"clike","text/x-htmlmixed":"htmlmixed","application/x-aspx":"htmlembedded"};CKEDITOR.config.codeAlias={C:"text/x-csrc","C++":"text/x-c++src","C#":"text/x-csharp",Java:"text/x-java",Html:"text/x-htmlmixed","ASP.NET":"application/x-aspx"};
CKEDITOR.config.codeDefaultTheme="default";
CKEDITOR.config.codeThemes={Default:"default","3024 Day":"3024-day","3024 Night":"3024-night",Ambiance:"ambiance","Base16 Dark":"base16-dark","Base16 Light":"base16-light",Blackboard:"blackboard",Cobalt:"cobalt",Eclipse:"eclipse",Elegant:"elegant","Erlang Dark":"erlang-dark","Lesser Dark":"lesser-dark",MBO:"mbo",MDN:"mdn-like",Midnight:"midnight",Monokai:"monokai",Neat:"neat",Night:"night","Paraiso Dark":"paraiso-dark","Paraiso Light":"paraiso-light","Pastel On Dark":"pastel-on-dark","Ruby Blue":"rubyblue",
Solarized:"solarized","Tomorrow Night 80's":"tomorrow-night-eighties",Twilight:"twilight","Vibrant Ink":"vibrant-ink","XQ Dark":"xq-dark","XQ Light":"xq-light"};CKEDITOR.config.codeMirrorThemeURL=void 0;CKEDITOR.config.codeMirrorConfig={};CKEDITOR.config.magicline_tabuList=CKEDITOR.config.magicline_tabuList||[];CKEDITOR.config.magicline_tabuList.push("cke-code-block");