(function(){function j(a,b){return{top:(a.pageYOffset||b.scrollTop)-(b.clientTop||0),left:(a.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}}function k(a){var a=a.$.getBoundingClientRect(),b=j(CKEDITOR.document.$.parentWindow||CKEDITOR.document.$.defaultView,CKEDITOR.document.$.documentElement);return{x:a.left+b.left,y:a.top+b.top}}function i(a,b,c){var d=k(c),e=c.$.offsetWidth,c=c.$.offsetHeight;return!(a>=d.x&&b>=d.y&&a<=d.x+e&&b<=d.y+c)?0:a>=d.x+e/2?2:1}function l(a){return{x:a.pageX||a.clientX+
(CKEDITOR.document.$.documentElement.scrollLeft||CKEDITOR.document.$.body.scrollLeft),y:a.pageY||a.clientY+(CKEDITOR.document.$.documentElement.scrollTop||CKEDITOR.document.$.body.scrollTop)}}function m(){return CKEDITOR.tools.extend({},{lastKeyStroke:this.lastKeyStroke,index:this.index,hasUndo:this.hasUndo,hasRedo:this.hasRedo,locked:this.locked,typesCount:this.typesCount,modifiersCount:this.modifiersCount,currentImage:this.currentImage,snapshots:this.snapshots})}function n(a){this.reset();this.lastKeyStroke=
a.lastKeyStroke;this.index=a.index;this.hasUndo=a.hasUndo;this.hasRedo=a.hasRedo;this.locked=a.locked;this.typesCount=a.typesCount;this.currentImage=a.currentImage;this.snapshots=a.snapshots}CKEDITOR.plugins.pagination={};CKEDITOR.plugins.pagination.Pagination=function(a){var b=this;this.pages=[];this.editor=a;this.currentPage=null;this._mouseMoveListener=function(a){a=l(a);if(Math.abs(b.dragStartOffset.x-a.x)>=b.editor.config.paginationDragOffset||Math.abs(b.dragStartOffset.y-a.y)>=b.editor.config.paginationDragOffset)b.detachMouseMoveEvent(b._mouseMoveListener),
b.dragStart(),b.attachMouseMoveEvent(b.mouseMoveListener)};this.mouseMoveListener=function(a){var a=l(a),d;b.dragging.$.style.top=""+(a.y-b.dragOffsetY)+"px";b.dragging.$.style.left=""+(a.x-b.dragOffsetX)+"px";var e=CKEDITOR.document.$,f=e.parentWindow||e.defaultView||window;e.selection&&e.selection.empty?e.selection.empty():f.getSelection&&(f=f.getSelection())&&f.removeAllRanges&&f.collapse(e.body,0);if(isNaN(b.lastPage)||!(d=i(a.x,a.y,b.pages[b.lastPage].element))){if(!i(a.x,a.y,b.editor.container)){b.placeholder.setStyle("display",
"none");b.dragging.addClass("cke-page-delete");return}e=b.pages.length;d=k(b.parts.list);b.placeholder.removeStyle("display");b.dragging.removeClass("cke-page-delete");if(a.x<d.x)(0!==b.lastPage||1!==b.lastHalf)&&b.placeholder.appendTo(b.parts.list,!0);else if(a.x>d.x+b.parts.list.$.offsetWidth)(b.lastPage!==e-1||2!==b.lastHalf)&&b.placeholder.appendTo(b.parts.list);else for(f=0;f<e;++f)if(!(f===b.draggingNumber||f===b.lastPage))if(d=i(a.x,a.y,b.pages[f].element)){b.lastPage=f;b.lastHalf=d;1===d?
b.placeholder.insertBefore(b.pages[f].element):b.placeholder.insertAfter(b.pages[f].element);break}}else d!==b.lastHalf&&(1===d?b.placeholder.insertBefore(b.pages[b.lastPage].element):b.placeholder.insertAfter(b.pages[b.lastPage].element));return!1};a.on("uiSpace",this.uiSpace,this);a.on("instanceReady",this.init,this)};CKEDITOR.plugins.pagination.Pagination.prototype={uiSpace:function(a){"bottom"===a.data.space&&(a.data.html+='<div class="cke-pagination"><div class="cke-pagination-handle cke-pagination-handle-prev"><div class="cke-pagination-handle-icon"></div></div><div class="cke-pagination-wrapper"><ul id="cke-pagination-'+
a.editor.name+'" class="cke-pagination-list"></ul><div class="cke-pagination-clearfix"></div></div><div class="cke-pagination-handle cke-pagination-handle-next"><div class="cke-pagination-handle-icon"></div></div></div>')},init:function(a){var b;this.element=a.editor.ui.space("bottom").findOne("div.cke-pagination");this.parts={leftHandle:this.element.findOne("div.cke-pagination-handle-prev"),rightHandle:this.element.findOne("div.cke-pagination-handle-next"),list:this.element.findOne("ul.cke-pagination-list")};
this.positionInterval=this.clickInterval=null;this.parts.leftHandle.on("mousedown",this.moveHandle,this,-2);this.parts.leftHandle.on("mouseup",this.stopHandle,this);this.parts.rightHandle.on("mousedown",this.moveHandle,this,2);this.parts.rightHandle.on("mouseup",this.stopHandle,this);a.editor.undoManager.exportData=m;a.editor.undoManager.importData=n;b=a.editor.updateElement;a.editor.updateElement=function(){this.loadSnapshot(this.pagination.getFullData());b.call(this);this.loadSnapshot(this.pagination.pages[this.pagination.currentPage].snapShot)};
var c=a.editor.config.pageSeparatorPattern,a=this.editor.getData();if("string"===typeof c&&c)try{c=RegExp(c,"gi")}catch(d){}if(c instanceof RegExp){a=a.split(c);for(c=0;c<a.length;++c)this.addPage(a[c],!0)}else this.addPage(a);this.setPage(0)},attachMouseMoveEvent:function(a){var b=CKEDITOR.document.$.body;b.addEventListener?b.addEventListener("mousemove",a,!1):b.attachEvent?b.attachEvent("onmousemove",a):b.onmousemove=a},detachMouseMoveEvent:function(a){var b=CKEDITOR.document.$.body;b.removeEventListener?
b.removeEventListener("mousemove",a,!1):b.detachEvent?b.detachEvent("onmousemove",a):b.onmousemove=null},_dragStart:function(a){if(a.listenerData.getCustomData("isDragging"))return a.data.preventDefault(!0),!1;this.dragStartOffset=a.data.getPageOffset();this.dragging=a.listenerData;this.draggingNumber=Number(a.listenerData.getAttribute("cke-page"));this.attachMouseMoveEvent(this._mouseMoveListener)},dragStart:function(){var a=this.dragging,b=CKEDITOR.document.getBody(),c=new CKEDITOR.dom.element("li"),
d,e;e=a.$.getBoundingClientRect();var f=j(CKEDITOR.document.getWindow().$,CKEDITOR.document.getDocumentElement().$);d=this.dragStartOffset.y-e.top-f.top;e=this.dragStartOffset.x-e.left-f.left;c.addClass("cke-page");c.addClass("cke-page-placeholder");c.setStyle("width",""+a.$.offsetWidth+"px");c.setHtml(" ");c.insertBefore(a);a.setCustomData("isDragging",!0);a.addClass("cke-page-dragging");a.setStyle("position","absolute");a.setStyle("top",""+(this.dragStartOffset.y-d)+"px");a.setStyle("left",""+(this.dragStartOffset.x-
e)+"px");a.appendTo(b);b.addClass("cke-pagination-drag-active");this.dragStartOffset=void 0;this.placeholder=c;this.dragOffsetX=e;this.dragOffsetY=d;this.lastHalf=0;return!0},dragStop:function(a){if(a.listenerData.getCustomData("isDragging")){this.dragging.removeCustomData("isDragging");if(this.dragging.hasClass("cke-page-delete")&&(a=this.pages.length,0===this.draggingNumber?this.placeholder.appendTo(this.parts.list,!0):this.draggingNumber===a-1?this.placeholder.appendTo(this.parts.list):this.placeholder.insertBefore(this.pages[this.draggingNumber+
1].element),confirm(this.editor.lang.pagination.confirmDelete))){a=this.dragging;this.resetDraggingData();this.deletePage(Number(a.getAttribute("cke-page")));return}this.dragging.removeStyle("position");this.dragging.removeStyle("top");this.dragging.removeStyle("left");this.dragging.removeClass("cke-page-delete");this.dragging.removeClass("cke-page-dragging");this.dragging.insertBefore(this.placeholder);this.resetDraggingData();this.sortPages(!0)}else this.draggingNumber=this.dragging=this.dragStartOffset=
void 0,this.detachMouseMoveEvent(this._mouseMoveListener),this.setPage(Number(a.listenerData.getAttribute("cke-page")))},resetDraggingData:function(){this.placeholder.remove(!1);this.lastPage=this.lastHalf=this.dragOffsetY=this.dragOffsetY=this.placeholder=this.draggingNumber=this.dragging=void 0;this.detachMouseMoveEvent(this.mouseMoveListener)},moveHandle:function(a){var b=a.listenerData,c=this;this.positionInterval&&clearInterval(this.positionInterval);this.clickInterval=setInterval(function(){var a=
c.parts.list.$.offsetLeft,a=a+b;c.parts.list.setStyle("margin-left",""+a+"px")},1)},stopHandle:function(){this.clickInterval&&clearInterval(this.clickInterval);var a=this.parts.list.$.offsetWidth,b=this.parts.list.getParent().$.clientWidth,c=this.parts.list.$.offsetLeft;if(a+c<b||0<c){var d,e=0,f=this,h=a<=b||0<c?0:b-a;d=(h-c)/50;this.positionInterval=setInterval(function(){++e;c+=d;50===e&&(c=h,clearInterval(f.positionInterval));f.parts.list.setStyle("margin-left",""+c+"px")},1)}},addPage:function(a,
b){var c=new CKEDITOR.dom.element("li"),d=this.pages.length;d&&!b&&(this.pages[this.currentPage].snapShot=this.editor.getSnapshot(),this.pages[this.currentPage].undoData=this.editor.undoManager.exportData());this.editor.loadSnapshot(a);this.editor.resetUndo();this.currentPage=d;c.setAttribute("cke-page",d);c.addClass("cke-page");c.setHtml(this.editor.lang.pagination.pageNumber.replace(":number",""+(d+1))+'<div class="cke-page-icon"></div>');c.appendTo(this.parts.list);c.on("mousedown",this._dragStart,
this,c);c.on("mouseup",this.dragStop,this,c);this.pages.push({element:c,snapShot:a,undoData:this.editor.undoManager.exportData()});this.editor.fire("addPage",c);b||this.setPage(this.currentPage);return c},deletePage:function(a){var b=this.pages.length,a=a||this.currentPage;if(!isNaN(a)&&!(0>a||a>b||!this.editor.fire("deletePage",this.pages[a])))this.pages[a].element.remove(),this.sortPages(!1),(b=this.pages.length)||this.editor.execCommand("addPage"),this.currentPage=void 0,this.setPage(Math.max(0,
Math.min(a,this.pages.length-1)))},clear:function(){for(var a=0;a<this.pages.length;++a)this.pages[a].element.remove();this.pages=[];this.editor.execCommand("addPage")},setPage:function(a){var b,c=this.pages.length;for(b=0;b<c;++b)this.pages[b].element.setAttribute("class","cke-page");this.pages[a].element.addClass("cke-page-active");a!==this.currentPage&&(isNaN(this.currentPage)||(this.pages[this.currentPage].snapShot=this.editor.getSnapshot(),this.pages[this.currentPage].undoData=this.editor.undoManager.exportData()),
this.editor.loadSnapshot(this.pages[a].snapShot),this.editor.undoManager.importData(this.pages[a].undoData),this.editor.focus(),this.editor.undoManager.onChange(),this.editor.fire("updateSnapshot"),this.currentPage=a)},sortPages:function(a){for(var b,c,d=[],e=0,f=this.parts.list.getChildren(),h=f.count(),g=0;g<h;++g)c=f.getItem(g),b=c.getAttribute("cke-page"),isNaN(b)||(b=Number(b),this.currentPage===b&&(e=g),c.setAttribute("cke-page",""+g),c.setHtml(this.editor.lang.pagination.pageNumber.replace(":number",
""+(g+1))+'<div class="cke-page-icon"></div>'),d[g]=this.pages[b]);this.pages=d;a&&(this.currentPage=e,this.setPage(e))},getFullData:function(){var a=[];this.pages[this.currentPage].snapShot=this.editor.getSnapshot();for(var b=0;b<this.pages.length;++b)a.push(this.pages[b].snapShot);return a.join(this.editor.config.pageSeparator)}};CKEDITOR.plugins.add("pagination",{lang:["en","pt-BR"],requires:["undo"],icons:"pgn-newpage",init:function(a){a.elementMode!==CKEDITOR.ELEMENT_MODE_INLINE&&(a.addCommand("addPage",
{canUndo:!1,readOnly:1,async:!1,exec:function(a){a.pagination.addPage(a.config.enterMode===CKEDITOR.ENTER_P?"<p></p>":"<br>")}}),a.ui.addButton("addPage",{title:a.lang.pagination.addPanelTitle,icon:"pgn-newpage",toolbar:"document,30",command:"addPage"}),a.pagination=new CKEDITOR.plugins.pagination.Pagination(a))},onLoad:function(){CKEDITOR.document.appendStyleText(".cke-pagination-drag-active {-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;-o-user-select: none;user-select: none;}.cke-pagination {position: absolute;height: 100%;left: 50%;top: 0;margin-left: -300px;width: 600px;}.cke-pagination-wrapper {position: relative;float: left;width: 566px;height: 100%;overflow: hidden;}.cke-pagination-list {position: absolute;height: 22px;width: auto;top: 3px;margin: 0;padding: 0;list-style: none;white-space: nowrap;overflow: visible;}.cke-pagination-clearfix {clear: both;}.cke-page {display: -moz-inline-block;display: inline-block;*display: inline;vertical-align: top;zoom: 1;margin: 0 0 0 5px;height: 14px;_height: 14px;font-size: 10px;font-weight: bold;font-family: Arial,Helvetica,Tahoma,Verdana,Sans-Serif;text-align: justify;white-space: nowrap;text-transform: lowercase;text-decoration: none;color: #4c4c4c;padding: 3px 6px;text-shadow: -1px 1px 0 #dddddd;-webkit-border-radius: 3px;-khtml-border-radius: 3px;-moz-border-radius: 3px;-ms-border-radius: 3px;-o-border-radius: 3px;border-radius: 3px;}.cke-pagination-handle, .cke-page {border: 1px solid #a6a6a6;border-bottom-color: #979797;background: #ffffff;background: -moz-linear-gradient(top,  #ffffff 0%, #e4e4e4 100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#e4e4e4));background: -webkit-linear-gradient(top,  #ffffff 0%,#e4e4e4 100%);background: -o-linear-gradient(top,  #ffffff 0%,#e4e4e4 100%);background: -ms-linear-gradient(top,  #ffffff 0%,#e4e4e4 100%);background: linear-gradient(to bottom,  #ffffff 0%,#e4e4e4 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e4e4e4',GradientType=0 );cursor: pointer;}.cke-pagination-handle:hover, .cke-page:hover {-moz-box-shadow: 0 0 1px rgba(0, 0, 0, .3) inset;-webkit-box-shadow: 0 0 1px rgba(0, 0, 0, .3) inset;box-shadow: 0 0 1px rgba(0, 0, 0, .3) inset;background: #f2f2f2;background: -moz-linear-gradient(top,  #f2f2f2 0%, #cccccc 100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f2f2f2), color-stop(100%,#cccccc));background: -webkit-linear-gradient(top,  #f2f2f2 0%,#cccccc 100%);background: -o-linear-gradient(top,  #f2f2f2 0%,#cccccc 100%);background: -ms-linear-gradient(top,  #f2f2f2 0%,#cccccc 100%);background: linear-gradient(to bottom,  #f2f2f2 0%,#cccccc 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f2f2f2', endColorstr='#cccccc',GradientType=0 );}.cke-pagination-handle {position: relative;height: 100%;width: 15px;cursor: pointer;border-top: none;border-bottom: none;text-align: center;}.cke-pagination-handle-icon {height: 100%;width: 100%;background-color: transparent;background-repeat: no-repeat;cursor: pointer;}.cke-pagination-handle-prev { float: left }.cke-pagination-handle-prev .cke-pagination-handle-icon {background-position: center 9px;background-image: url("+
this.path+"images/handle-left.png);}.cke-pagination-handle-next { float: right }.cke-pagination-handle-next .cke-pagination-handle-icon {background-position: 6px 9px;background-image: url("+this.path+"images/handle-right.png);}.cke-page.cke-page-active {background: #c7c7c7;border-bottom-color: white;border-right-color: white;box-shadow: inset #929292 0 1px 4px 1px;}.cke-page.cke_button_on {background-color: #bfbfbf;background-image: none;}.cke-page.cke-page-placeholder {background: transparent !important;border: 1px dashed #979797 !important;padding-right: 0 !important;padding-left: 0 !important;box-shadow: none !important;cursor: default !important;}.cke-page.cke-page-dragging {z-index: 100;-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;cursor: move !important;}.cke-page-icon {display: none;}.cke-page-delete .cke-page-icon {position: absolute;display: block !important;width: 10px;height: 10px;right: -5px;top: 50%;margin-top: -5px;background: transparent url("+
this.path+"images/delete.png) center center no-repeat;}")}})})();CKEDITOR.config.pageSeparator='<div aria-label="Page Break" contenteditable="false" style="page-break-after: always;" title="Page Break"></div>';CKEDITOR.config.pageSeparatorPattern=/(?:<div(?: aria-label="[^"]")?(?: +contenteditable="false")? +style="page-break-after: +always;"(?: +title="[^"]*")?(?:>[^<]*<\/div>|\/>))/ig;CKEDITOR.config.paginationDragOffset=5;